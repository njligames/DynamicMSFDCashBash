<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mount Sinai Fire Department - Cash Bash</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"
    ></script>
    <script src="{{ url_for('static', filename='assets/js/storage.js')}}"></script>
    <script>
      $(document).ready(function () {
        const ticketViewLib = {
          showCashBashTickets: function () {
            $("#cashBashTickets").empty();
            var tickets = JSON.parse(localStorage.getItem("cashBashTickets"));
            $.each(tickets, function (index, value) {
              ticketViewLib.cashBashTickets(value);
            });
            var cashBashTicketTrashLinks = document.querySelectorAll(
              "i.fa.fa-trash.mb-1.text-danger"
            );
            cashBashTicketTrashLinks.forEach((myLink) => {
              myLink.addEventListener("click", function (e) {
                e.preventDefault();
                ticket_number = e.srcElement.id;

                cashBashTickets = [];

                var tickets = JSON.parse(
                  localStorage.getItem("cashBashTickets")
                );

                for (var i = 0; i < tickets.length; i++) {
                  if (tickets[i] != ticket_number) {
                    console.log(tickets[i]);
                    cashBashTickets.push(tickets[i]);
                  }
                }
                localStorage.setItem(
                  "cashBashTickets",
                  JSON.stringify(cashBashTickets)
                );
                if (cashBashTickets.length == 0) {
                  // window.close();
                }
                ticketViewLib.showCashBashTickets();
              });
            });
          },
          showCashBashTicketsChanceThisYear: function () {
            $("#cashBashTicketsChanceThisYear").empty();
            var cashBashTicketsChanceThisYearCount = JSON.parse(
              localStorage.getItem("cashBashTicketsChanceThisYear")
            );
            ticketViewLib.cashBashTicketsChanceThisYear(
              cashBashTicketsChanceThisYearCount[0]
            );
            var cashBashTicketTrashThisYearMinusLinks =
              document.querySelectorAll("i.fa.fa-minus.text-danger.this-year");
            cashBashTicketTrashThisYearMinusLinks.forEach((myLink) => {
              myLink.addEventListener("click", function (e) {
                console.log("this-year minus");
                // text-grey mt-1 mr-1 ml-1 this-year
                var thisYearh5Links = document.querySelectorAll(
                  "h5.text-grey.mt-1.mr-1.ml-1.this-year"
                );
                thisYearh5Links.forEach((myLink) => {
                  console.log(myLink.textContent);
                  var val = parseInt(myLink.textContent);
                  if (val > 0) {
                    val--;
                  }
                  myLink.textContent = val.toString();
                  localStorage.setItem(
                    "cashBashTicketsChanceThisYear",
                    JSON.stringify([val.toString()])
                  );
                });
              });
            });

            var cashBashTicketTrashThisYearPlusLinks =
              document.querySelectorAll("i.fa.fa-plus.text-success.this-year");
            cashBashTicketTrashThisYearPlusLinks.forEach((myLink) => {
              myLink.addEventListener("click", function (e) {
                console.log("this-year plus");
                // text-grey mt-1 mr-1 ml-1 this-year
                var thisYearh5Links = document.querySelectorAll(
                  "h5.text-grey.mt-1.mr-1.ml-1.this-year"
                );
                thisYearh5Links.forEach((myLink) => {
                  console.log(myLink.textContent);
                  var val = parseInt(myLink.textContent);
                  val++;
                  myLink.textContent = val.toString();
                  localStorage.setItem(
                    "cashBashTicketsChanceThisYear",
                    JSON.stringify([val.toString()])
                  );
                });
              });
            });
          },
          showCashBashTicketsChanceNextYear: function () {
            $("#cashBashTicketsChanceNextYear").empty();
            var cashBashTicketsChanceNextYearCount = JSON.parse(
              localStorage.getItem("cashBashTicketsChanceNextYear")
            );
            ticketViewLib.cashBashTicketsChanceNextYear(
              cashBashTicketsChanceNextYearCount[0]
            );
            var cashBashTicketTrashNextYearMinusLinks =
              document.querySelectorAll("i.fa.fa-minus.text-danger.next-year");
            cashBashTicketTrashNextYearMinusLinks.forEach((myLink) => {
              myLink.addEventListener("click", function (e) {
                console.log("next-year minus");
                // text-grey mt-1 mr-1 ml-1 next-year
                var nextYearh5Links = document.querySelectorAll(
                  "h5.text-grey.mt-1.mr-1.ml-1.next-year"
                );
                nextYearh5Links.forEach((myLink) => {
                  console.log(myLink.textContent);
                  var val = parseInt(myLink.textContent);
                  if (val > 0) {
                    val--;
                  }
                  myLink.textContent = val.toString();
                  localStorage.setItem(
                    "cashBashTicketsChanceNextYear",
                    JSON.stringify([val.toString()])
                  );
                });
              });
            });

            var cashBashTicketTrashNextYearPlusLinks =
              document.querySelectorAll("i.fa.fa-plus.text-success.next-year");
            cashBashTicketTrashNextYearPlusLinks.forEach((myLink) => {
              myLink.addEventListener("click", function (e) {
                console.log("next-year plus");
                // text-grey mt-1 mr-1 ml-1 next-year
                var nextYearh5Links = document.querySelectorAll(
                  "h5.text-grey.mt-1.mr-1.ml-1.next-year"
                );
                nextYearh5Links.forEach((myLink) => {
                  console.log(myLink.textContent);
                  var val = parseInt(myLink.textContent);
                  val++;
                  myLink.textContent = val.toString();

                  localStorage.setItem(
                    "cashBashTicketsChanceNextYear",
                    JSON.stringify([val.toString()])
                  );
                });
              });
            });
          },
          show: function () {
            ticketViewLib.showCashBashTickets();
            ticketViewLib.showCashBashTicketsChanceThisYear();
            ticketViewLib.showCashBashTicketsChanceNextYear();
          },
          cashBashTickets: function (ticket_number) {
            $("<div>", { class: "card rounded-3 mb-4" })
              .append(
                $("<div>", { class: "card-body p-4" }).append(
                  $("<div>", {
                    class:
                      "row d-flex justify-content-between align-items-center",
                  }).append(
                    $("<div>", { class: "col-md-2 col-lg-2 col-xl-2" }).append(
                      $("<img>", {
                        class: "img-fluid rounded-3",
                        src: "https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-shopping-carts/img1.webp",
                        alt: "Cotton T-shirt",
                      })
                    ),
                    $("<div>", { class: "col-md-3 col-lg-3 col-xl-3" }).append(
                      $("<p>", { class: "lead fw-normal mb-2" }).text(
                        "Cash Bash Ticket"
                      ),
                      $("<p>")
                        .text("" + ticket_number)
                        .prepend(
                          $("<span>", { class: "text-muted" }).text(
                            "Ticket Number "
                          )
                        )
                    ),
                    $("<div>", {
                      class: "col-md-3 col-lg-3 col-xl-2 d-flex",
                    }).append(),
                    $("<div>", {
                      class: "col-md-3 col-lg-2 col-xl-2 offset-lg-1",
                    }).append($("<h5>", { class: "mb-0" }).text("$100.00")),
                    $("<div>", { class: "d-flex align-items-center" }).append(
                      $("<a>", { href: "#!", class: "text-danger" }).append(
                        $("<i>", {
                          class: "fa fa-trash mb-1 text-danger",
                          id: "" + ticket_number,
                        })
                      )
                    )
                  )
                )
              )
              .appendTo("#cashBashTickets");
          },
          cashBashTicketsChanceNextYear: function (count) {
            $("<div>", { class: "card rounded-3 mb-4" })
              .append(
                $("<div>", { class: "card-body p-4" }).append(
                  $("<div>", {
                    class:
                      "row d-flex justify-content-between align-items-center",
                  }).append(
                    $("<div>", { class: "col-md-2 col-lg-2 col-xl-2" }).append(
                      $("<img>", {
                        class: "img-fluid rounded-3",
                        src: "https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-shopping-carts/img1.webp",
                        alt: "Cotton T-shirt",
                      })
                    ),
                    $("<div>", { class: "col-md-3 col-lg-3 col-xl-3" }).append(
                      $("<p>", { class: "lead fw-normal mb-2" }).text(
                        "Cash Bash Ticket Chance"
                      ),
                      $("<p>").prepend(
                        $("<span>", { class: "text-muted" }).text(
                          "2025 Cash Bash Ticket Chance"
                        )
                      )
                    ),
                    $("<div>", {
                      class: "col-md-3 col-lg-3 col-xl-2 d-flex",
                    }).append(
                      $("<a>", { href: "#!", class: "text-danger" }).append(
                        $("<i>", { class: "fa fa-minus text-danger next-year" })
                      ),
                      $("<h5>", {
                        class: "text-grey mt-1 mr-1 ml-1 next-year",
                      }).text("" + count),
                      $("<a>", { href: "#!", class: "text-danger" }).append(
                        $("<i>", { class: "fa fa-plus text-success next-year" })
                      )
                    ),
                    $("<div>", {
                      class: "col-md-3 col-lg-2 col-xl-2 offset-lg-1",
                    }).append($("<h5>", { class: "mb-0" }).text("$5.00"))
                  )
                )
              )
              .appendTo("#cashBashTicketsChanceNextYear");
          },
          cashBashTicketsChanceThisYear: function (count) {
            $("<div>", { class: "card rounded-3 mb-4" })
              .append(
                $("<div>", { class: "card-body p-4" }).append(
                  $("<div>", {
                    class:
                      "row d-flex justify-content-between align-items-center",
                  }).append(
                    $("<div>", { class: "col-md-2 col-lg-2 col-xl-2" }).append(
                      $("<img>", {
                        class: "img-fluid rounded-3",
                        src: "https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-shopping-carts/img1.webp",
                        alt: "Cotton T-shirt",
                      })
                    ),
                    $("<div>", { class: "col-md-3 col-lg-3 col-xl-3" }).append(
                      $("<p>", { class: "lead fw-normal mb-2" }).text(
                        "Cash Bash Chance"
                      ),
                      $("<p>").prepend(
                        $("<span>", { class: "text-muted" }).text(
                          "2024 Cash Bash Ticket Chance"
                        )
                      )
                    ),
                    $("<div>", {
                      class: "col-md-3 col-lg-3 col-xl-2 d-flex",
                    }).append(
                      $("<a>", { href: "#!", class: "text-danger" }).append(
                        $("<i>", { class: "fa fa-minus text-danger this-year" })
                      ),
                      $("<h5>", {
                        class: "text-grey mt-1 mr-1 ml-1 this-year",
                      }).text("" + count),
                      $("<a>", { href: "#!", class: "text-danger" }).append(
                        $("<i>", { class: "fa fa-plus text-success this-year" })
                      )
                    ),
                    $("<div>", {
                      class: "col-md-3 col-lg-2 col-xl-2 offset-lg-1",
                    }).append($("<h5>", { class: "mb-0" }).text("$10.00"))
                  )
                )
              )
              .appendTo("#cashBashTicketsChanceThisYear");
          },
        };

        if ("0" == "{{ticket_number}}") {
          ticketViewLib.show();
        } else if (AddCashBashTicket("{{ticket_number}}")) {
          ticketViewLib.show();
        }
      });
    </script>
  </head>
  <body className="snippet-body">
    <div class="container mt-5 mb-5">
      <div class="d-flex justify-content-center row">
        <div class="col-md-8">
          <div class="p-2">
            <h4>Shopping cart</h4>
          </div>

          <div id="cashBashTickets"></div>
          <div id="cashBashTicketsChanceThisYear"></div>
          <div id="cashBashTicketsChanceNextYear"></div>

          <div
            class="d-flex flex-row align-items-center mt-3 p-2 bg-white rounded"
          >
            <form name="MyForm" action="payment" method="post">
              <input type="hidden" name="cmd" value="_s-xclick" />

              <div
                class="d-flex flex-row align-items-center mt-3 p-2 bg-white rounded"
              >
                <div>
                  <input
                    type="hidden"
                    name="on1"
                    value="Winner Contact #"
                  />Winner Contact #
                </div>
                <input
                  type="text"
                  name="phone_number"
                  maxlength="200"
                  required
                />
              </div>

              <input type="hidden" name="currency_code" value="USD" />

              <input
                class="close"
                type="image"
                src="https://www.paypalobjects.com/en_US/i/btn/btn_cart_LG.gif"
                border="0"
                name="submit"
                alt="PayPal - The safer, easier way to pay online!"
              />
              <img
                alt=""
                border="0"
                src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif"
                width="1"
                height="1"
              />
            </form>
          </div>
        </div>
      </div>
    </div>
    <script
      type="text/javascript"
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"
    ></script>
    <script type="text/javascript" src="#"></script>
    <script type="text/javascript" src="#"></script>
    <script type="text/javascript" src="#"></script>
    <script type="text/javascript">
      #
    </script>
  </body>
</html>
