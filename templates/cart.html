<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Snippet - BBBootstrap</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"
    ></script>
    <script>
      function CheckBrowser() {
        if ("localStorage" in window && window["localStorage"] !== null) {
          // we can use localStorage object to store data
          return true;
        } else {
          return false;
        }
      }

      $(document).ready(function () {
        const ticketViewLib = {
          show: function () {
            $("#cashBashTickets").empty();

            var tickets = JSON.parse(localStorage.getItem("cashBashTickets"));
            $.each(tickets, function (index, value) {
              ticketViewLib.cashBashTickets(value);
            });

            $("#cashBashTicketsChanceThisYear").empty();
            var cashBashTicketsChanceThisYearCount = JSON.parse(
              localStorage.getItem("cashBashTicketsChanceThisYear")
            );
            ticketViewLib.cashBashTicketsChanceThisYear(
              cashBashTicketsChanceThisYearCount[0]
            );

            $("#cashBashTicketsChanceNextYear").empty();
            var cashBashTicketsChanceNextYearCount = JSON.parse(
              localStorage.getItem("cashBashTicketsChanceNextYear")
            );
            ticketViewLib.cashBashTicketsChanceNextYear(
              cashBashTicketsChanceNextYearCount[0]
            );

            var myLinks = document.querySelectorAll(
              "i.fa.fa-trash.mb-1.text-danger"
            );
            myLinks.forEach((myLink) => {
              myLink.addEventListener("click", function (e) {
                e.preventDefault();
                ticket_number = e.srcElement.id;

                cashBashTickets = [];

                var tickets = JSON.parse(
                  localStorage.getItem("cashBashTickets")
                );

                for (var i = 0; i < tickets.length; i++) {
                  if (tickets[i] != ticket_number) {
                    console.log(tickets[i]);
                    cashBashTickets.push(tickets[i]);
                  }
                }
                localStorage.setItem(
                  "cashBashTickets",
                  JSON.stringify(cashBashTickets)
                );
                if (cashBashTickets.length == 0) {
                  // window.close();
                }
                ticketViewLib.show();
              });
            });
          },
          cashBashTickets: function (ticket_number) {
            $("<div>", { class: "card rounded-3 mb-4" })
              .append(
                $("<div>", { class: "card-body p-4" }).append(
                  $("<div>", {
                    class:
                      "row d-flex justify-content-between align-items-center",
                  }).append(
                    $("<div>", { class: "col-md-2 col-lg-2 col-xl-2" }).append(
                      $("<img>", {
                        class: "img-fluid rounded-3",
                        src: "https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-shopping-carts/img1.webp",
                        alt: "Cotton T-shirt",
                      })
                    ),
                    $("<div>", { class: "col-md-3 col-lg-3 col-xl-3" }).append(
                      $("<p>", { class: "lead fw-normal mb-2" }).text(
                        "Cash Bash Ticket"
                      ),
                      $("<p>")
                        .text("" + ticket_number)
                        .prepend(
                          $("<span>", { class: "text-muted" }).text(
                            "Ticket Number "
                          )
                        )
                    ),
                    $("<div>", {
                      class: "col-md-3 col-lg-3 col-xl-2 d-flex",
                    }).append(),
                    $("<div>", {
                      class: "col-md-3 col-lg-2 col-xl-2 offset-lg-1",
                    }).append($("<h5>", { class: "mb-0" }).text("$100.00")),
                    $("<div>", { class: "d-flex align-items-center" }).append(
                      $("<a>", { href: "#!", class: "text-danger" }).append(
                        $("<i>", {
                          class: "fa fa-trash mb-1 text-danger",
                          id: "" + ticket_number,
                        })
                      )
                    )
                  )
                )
              )
              .appendTo("#cashBashTickets");
          },
          cashBashTicketsChanceNextYear: function (ticket_number) {
            $("<div>", { class: "card rounded-3 mb-4" })
              .append(
                $("<div>", { class: "card-body p-4" }).append(
                  $("<div>", {
                    class:
                      "row d-flex justify-content-between align-items-center",
                  }).append(
                    $("<div>", { class: "col-md-2 col-lg-2 col-xl-2" }).append(
                      $("<img>", {
                        class: "img-fluid rounded-3",
                        src: "https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-shopping-carts/img1.webp",
                        alt: "Cotton T-shirt",
                      })
                    ),
                    $("<div>", { class: "col-md-3 col-lg-3 col-xl-3" }).append(
                      $("<p>", { class: "lead fw-normal mb-2" }).text(
                        "Cash Bash Ticket Chance"
                      ),
                      $("<p>").prepend(
                        $("<span>", { class: "text-muted" }).text(
                          "2025 Cash Bash Ticket Chance"
                        )
                      )
                    ),
                    $("<div>", {
                      class: "col-md-3 col-lg-3 col-xl-2 d-flex",
                    }).append(),
                    $("<div>", {
                      class: "col-md-3 col-lg-2 col-xl-2 offset-lg-1",
                    }).append($("<h5>", { class: "mb-0" }).text("$5.00"))
                  )
                )
              )
              .appendTo("#cashBashTicketsChanceNextYear");
          },
          cashBashTicketsChanceThisYear: function (ticket_number) {
            $("<div>", { class: "card rounded-3 mb-4" })
              .append(
                $("<div>", { class: "card-body p-4" }).append(
                  $("<div>", {
                    class:
                      "row d-flex justify-content-between align-items-center",
                  }).append(
                    $("<div>", { class: "col-md-2 col-lg-2 col-xl-2" }).append(
                      $("<img>", {
                        class: "img-fluid rounded-3",
                        src: "https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-shopping-carts/img1.webp",
                        alt: "Cotton T-shirt",
                      })
                    ),
                    $("<div>", { class: "col-md-3 col-lg-3 col-xl-3" }).append(
                      $("<p>", { class: "lead fw-normal mb-2" }).text(
                        "Cash Bash Chance"
                      ),
                      $("<p>").prepend(
                        $("<span>", { class: "text-muted" }).text(
                          "2024 Cash Bash Ticket Chance"
                        )
                      )
                    ),
                    $("<div>", {
                      class: "col-md-3 col-lg-3 col-xl-2 d-flex",
                    }).append(),
                    $("<div>", {
                      class: "col-md-3 col-lg-2 col-xl-2 offset-lg-1",
                    }).append($("<h5>", { class: "mb-0" }).text("$10.00"))
                  )
                )
              )
              .appendTo("#cashBashTicketsChanceThisYear");
          },
        };

        if (CheckBrowser()) {
          count = localStorage.length;
          if (count == 0) {
            var cashBashTickets = ["{{ticket_number}}"];

            localStorage.setItem(
              "cashBashTickets",
              JSON.stringify(cashBashTickets)
            );

            localStorage.setItem(
              "cashBashTicketsChanceThisYear",
              JSON.stringify([0])
            );

            localStorage.setItem(
              "cashBashTicketsChanceNextYear",
              JSON.stringify([0])
            );
          } else {
            var cashBashTickets = JSON.parse(
              localStorage.getItem("cashBashTickets")
            );
            var found = false;

            var tickets = JSON.parse(localStorage.getItem("cashBashTickets"));

            for (var i = 0; i < tickets.length; i++) {
              if (tickets[i] == "{{ticket_number}}") {
                found = true;
              }
            }
            if (!found) {
              cashBashTickets.push("{{ticket_number}}");
            }
            localStorage.setItem(
              "cashBashTickets",
              JSON.stringify(cashBashTickets)
            );
          }

          ticketViewLib.show();
        }
      });
    </script>
  </head>
  <body className="snippet-body">
    <div class="container mt-5 mb-5">
      <div class="d-flex justify-content-center row">
        <div class="col-md-8">
          <div class="p-2">
            <h4>Shopping cart</h4>
          </div>

          <div id="cashBashTickets"></div>
          <div id="cashBashTicketsChanceThisYear"></div>
          <div id="cashBashTicketsChanceNextYear"></div>

          <!--
                    <div class="d-flex flex-row align-items-center mt-3 p-2 bg-white rounded"><input type="text" class="form-control border-0 gift-card" placeholder="discount code/gift card"><button class="btn btn-outline-warning btn-sm ml-2" type="button">Apply</button></div>
                    -->

          <div
            class="d-flex flex-row align-items-center mt-3 p-2 bg-white rounded"
          >
            <button
              class="btn btn-warning btn-block btn-lg ml-2 pay-button"
              type="button"
            >
              Proceed to Pay
            </button>
          </div>
        </div>
      </div>
    </div>
    <script
      type="text/javascript"
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"
    ></script>
    <script type="text/javascript" src="#"></script>
    <script type="text/javascript" src="#"></script>
    <script type="text/javascript" src="#"></script>
    <script type="text/javascript">
      #
    </script>
  </body>
</html>
